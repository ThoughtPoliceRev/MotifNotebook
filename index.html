<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Motif Oracle</title>
    <link rel="stylesheet" href="styles.css">
    <script src="lib/tinymce/tinymce.min.js"></script>
    <script src="lib/jszip/jszip.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Motif Oracle Notebook</h1>
            <div class="functionality-buttons">
                <button id="save-session-btn">Save Session</button>
                <button id="load-session-btn">Load Session</button>
                <button id="export-session-btn">Export Session</button>
                <button id="import-session-btn">Import Session</button>
                <button id="new-session-btn">New Session</button>
            </div>
        </header>
        <main>
            <div class="main-tabs">
                <div class="main-tab active" data-tab="notebook">Notebook</div>
                <div class="main-tab" data-tab="print">Print Preview</div>
                <div class="main-tab" data-tab="about">About</div>
            </div>
            
            <!-- Notebook Tab -->
            <div id="notebook-tab" class="main-tab-content active">
                <div class="notebook-container">
                    <nav class="notebook-nav">
                        <div class="notebook-tab active" data-tab="oracle">Oracle</div>
                        <div class="notebook-tab" data-tab="character">Character</div>
                        <div class="notebook-tab" data-tab="scene">Scene Notes</div>
                        <div class="notebook-tab" data-tab="story">Story So Far</div>
                        <div class="notebook-tab" data-tab="extra">Extra Notes</div>
                    </nav>
                    <div class="notebook-content">
                        <div id="oracle-tab" class="notebook-tab-content active">
                            <div class="oracle-controls">
                                <div class="input-group">
                                    <input type="text" id="question-input" placeholder="Enter your question (optional)">
                                    <button id="roll-btn">Roll</button>
                                </div>
                                <div class="dice-row">
                                    <div class="dice" id="dice1">1</div>
                                    <div class="dice" id="dice2">1</div>
                                    <div class="dice" id="dice3">1</div>
                                </div>
                                <div class="select-group">
                                    <div class="select-container">
                                        <div class="select-label">Answer Type</div>
                                        <select id="select1">
                                            <option value="Plain">Plain Yes/No</option>
                                            <option value="Mixed">Mixed Yes/No/Maybe</option>
                                        </select>
                                    </div>
                                    <div class="select-container">
                                        <div class="select-label">Modifier</div>
                                        <select id="select2">
                                            <option value="Wrinkle">Wrinkle</option>
                                            <option value="Certainty">Certainty</option>
                                        </select>
                                    </div>
                                    <div class="select-container">
                                        <div class="select-label">Context</div>
                                        <select id="select3">
                                            <option value="Activity">Activity</option>
                                            <option value="Advantage">Advantage</option>
                                            <option value="Attention">Attention</option>
                                            <option value="Disposition">Disposition</option>
                                            <option value="Impression">Impression</option>
                                            <option value="Intensity">Intensity</option>
                                            <option value="Progress">Progress</option>
                                            <option value="Safety">Safety</option>
                                            <option value="Supernatural">Supernatural</option>
                                            <option value="Utility">Utility</option>
                                            <option value="Value">Value</option>
                                            <option value="Weird">Weird</option>
                                            <option value="YOUR CHOICE">YOUR CHOICE</option>
                                        </select>
                                    </div>
                                </div>
                                <div id="roll-results" class="roll-results"></div>
                            </div>
                            <div class="editor-container">
                                <textarea id="rolls-editor"></textarea>
                            </div>
                        </div>
                        <div id="character-tab" class="notebook-tab-content">
                            <h3>Character</h3>
                            <div class="editor-container">
                                <textarea id="character-editor"></textarea>
                            </div>
                        </div>
                        <div id="scene-tab" class="notebook-tab-content">
                            <h3>Scene Notes</h3>
                            <div class="editor-container">
                                <textarea id="scene-editor"></textarea>
                            </div>
                        </div>
                        <div id="story-tab" class="notebook-tab-content">
                            <h3>Story So Far</h3>
                            <div class="editor-container">
                                <textarea id="story-editor"></textarea>
                            </div>
                        </div>
                        <div id="extra-tab" class="notebook-tab-content">
                            <h3>Extra Notes</h3>
                            <div class="editor-container">
                                <textarea id="extra-editor"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Print Preview Tab -->
            <div id="print-tab" class="main-tab-content">
                <div class="print-controls">
                    <button id="print-session-btn">Print Session</button>
                </div>
                <div class="print-preview">
                    <div class="preview-section">
                        <h2>Character</h2>
                        <div id="print-character"></div>
                    </div>
                    <div class="preview-section">
                        <h2>Scene Notes</h2>
                        <div id="print-scene"></div>
                    </div>
                    <div class="preview-section">
                        <h2>Story So Far</h2>
                        <div id="print-story"></div>
                    </div>
                    <div class="preview-section">
                        <h2>Extra Notes</h2>
                        <div id="print-extra"></div>
                    </div>
                    <div class="preview-section">
                        <h2>Oracle Rolls</h2>
                        <div id="print-rolls"></div>
                    </div>
                </div>
            </div>
            
            <!-- About Tab -->
            <div id="about-tab" class="main-tab-content" style="display: none;">
                <div class="about-content">
                    <h2>About Motif Oracle</h2>
                    <p>Motif Oracle is a storytelling tool designed for solo roleplaying and creative writing. It uses a three-die system to generate answers and add nuance to your narrative.</p>
                    
                    <h3>Notebook Features</h3>
                    <ul>
                        <li><strong>Oracle:</strong> The main oracle interface with roll history</li>
                        <li><strong>Character:</strong> A place for character details and development</li>
                        <li><strong>Scene Notes:</strong> Track your current scene</li>
                        <li><strong>Story So Far:</strong> Record your overall narrative</li>
                        <li><strong>Extra Notes:</strong> Space for additional information</li>
                    </ul>

                    <h3>Oracle Instructions</h3>
                    <ol>
                        <li>Enter your yes/no question in the question field (optional)</li>
                        <li>Select your desired die options</li>
                        <li>Click "Roll" to get your answer</li>
                        <li>Use the notebook tabs to record your story</li>
                    </ol>

                    <h3>The Three-Die System</h3>
                    <h4>Die 1: Answer Die</h4>
                    <ul>
                        <li><strong>Plain Yes/No:</strong> Simple binary answers</li>
                        <li><strong>Mixed Yes/No/Maybe:</strong> Includes possibility of mixed or uncertain results</li>
                    </ul>
                    <h4>Die 2: Modifier Die</h4>
                    <ul>
                        <li><strong>Wrinkle:</strong> Adds complications or twists</li>
                        <li><strong>Certainty:</strong> Indicates the confidence level of the answer</li>
                    </ul>
                    <h4>Die 3: Context Die</h4>
                    <ul>
                        <li>Provides additional context for interpreting the answer</li>
                        <li>Multiple context options available for different situations</li>
                    </ul>

                    <h3>How to Use</h3>
                    <ol>
                        <li>Enter your yes/no question in the question field (optional)</li>
                        <li>Select your desired die options</li>
                        <li>Click "Roll" to get your answer</li>
                        <li>Use the notebook tabs to record your story</li>
                    </ol>

                    <h3>Features</h3>
                    <ul>
                        <li>Rich text editing in all notebook sections</li>
                        <li>Automatic roll history tracking</li>
                        <li>Simple and intuitive interface</li>
                        <li>Works offline - all data stored locally</li>
                        <li>Comprehensive session management</li>
                        <li>Automatic backup system</li>
                    </ul>

                    <h3>Session Management</h3>
                    <p>Your work is automatically saved and can be managed using the buttons at the top of the notebook:</p>
                    <ul>
                        <li><strong>Auto-Save System:</strong>
                            <ul>
                                <li>Auto Save every 30 seconds</li>
                                <li>Backup Save every 5 minutes</li>
                                <li>Sessions persist through page refreshes</li>
                                <li>All data stored locally in your browser</li>
                            </ul>
                        </li>
                        <li><strong>Save Session:</strong> Create a named save of your current work</li>
                        <li><strong>Load Session:</strong> 
                            <ul>
                                <li>View and load any saved session</li>
                                <li>Delete unwanted saves using the trash can icon</li>
                                <li>Auto-saves appear at the top of the list</li>
                                <li>Shows date and time of each save</li>
                                <li>Confirmation dialogs protect against accidental deletion or loading</li>
                            </ul>
                        </li>
                        <li><strong>Export Session:</strong> 
                            <ul>
                                <li>Save your work as a file on your computer</li>
                                <li>Creates a ZIP file named MotifNotebook-[Session Name].zip</li>
                                <li>Useful for backup or sharing between browsers</li>
                            </ul>
                        </li>
                        <li><strong>Import Session:</strong> Load a previously exported ZIP file</li>
                        <li><strong>New Session:</strong> Start fresh with a clean notebook (requires confirmation)</li>
                    </ul>

                    <h3>Data Safety</h3>
                    <p>Your work is protected through multiple save mechanisms:</p>
                    <ul>
                        <li>Frequent auto-saves prevent data loss</li>
                        <li>Backup saves provide additional protection</li>
                        <li>Confirmation dialogs prevent accidental data loss</li>
                        <li>Export feature allows external backups</li>
                    </ul>
                </div>
            </div>
        </main>
        <footer>
            <p>Motif Oracle Notebook was developed by Rev from <a href="https://bsky.app/profile/thoughtpunks.com" target="_blank">Thought Punks</a></p>
            <p>Motif is licensed under a <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">Creative Commons Attribution 4.0 International License</a></p>
        </footer>
    </div>
    
    <!-- Save Session Modal -->
    <div id="save-session-modal" class="modal">
        <div class="modal-content">
            <h3>Save Session</h3>
            <div class="save-session-container">
                <select id="save-session-select" class="session-select">
                    <option value="NEW_SAVE">NEW SAVE</option>
                </select>
                <div id="new-save-input" style="display: none;">
                    <input type="text" id="session-name-input" placeholder="Enter session name">
                </div>
                <div class="modal-buttons">
                    <button id="save-session-ok" class="modal-btn">OK</button>
                    <button id="save-session-cancel" class="modal-btn">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirm-modal" class="modal">
        <div class="modal-content">
            <h3>Confirm Overwrite</h3>
            <p id="confirm-message">Are you sure you want to overwrite this save?</p>
            <div class="modal-buttons">
                <button id="confirm-yes" class="modal-btn">Yes</button>
                <button id="confirm-no" class="modal-btn">No</button>
            </div>
        </div>
    </div>

    <!-- Success Message -->
    <div id="success-message" class="success-message">
        Session saved successfully!
    </div>
    
    <script src="script.js"></script>
</body>
</html>
